{% extends "email.html.twig" %}

{% block stylesheets %}
{{ parent() }}
<style type="text/css">
    table { border-right: 1px solid #ddd; border-bottom: 1px solid #ddd; width: 100% }
    td, th { font-size: 13px; padding: 2px 4px; border-top: 1px solid #ddd; border-left: 1px solid #ddd; }
    p { margin-bottom: 10px; }
    a.read-message {
        padding: 10px 16px; font-size: 18px; line-height: 24px; border-radius: 6px;
        color: #fff; background-color: #337ab7; border: 1px solid #2e6da4;
        display: inline-block; text-align: center; text-decoration: none;
    }
</style>
{% endblock stylesheets %}

{% set ticket = message.ticket %}

{% block subject %}{{ subject|raw }}{% endblock subject %}

{% block body %}
{% spaceless %}
    {% if 0 < ticket.orders|length %}
        {% set path = path('ekyna_commerce_account_order_show', {'number': ticket.orders|first.number}) %}
    {% elseif 0 < ticket.quotes|length %}
        {% set path = path('ekyna_commerce_account_quote_show', {'number': ticket.quotes|first.number}) %}
    {% else %}
        {% set path = path('ekyna_commerce_account_ticket_index') %}
    {% endif %}
    {{ 'ekyna_commerce.ticket_message.notify.customer.content'|trans({
        '%number%': ticket.number,
        '%subject%': ticket.subject,
        '%url%': absolute_url(path)
    })|raw }}
    {{- get_setting('commerce.email_signature')|raw -}}
{% endspaceless %}
{% endblock body %}
