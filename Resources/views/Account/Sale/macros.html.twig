{%- macro sale_header(sale) -%}
    <dl class="dl-horizontal">
        <dt>{{ 'field.status'|trans({}, 'EkynaCommerce') }}</dt>
        <dd>{{ sale|sale_state_badge }}</dd>

        <dt>{{ 'field.created_at'|trans({}, 'EkynaUi') }}</dt>
        <dd>{{ sale.createdAt|format_datetime('short', 'none') }}</dd>

        {% if sale is sale_quote and not sale.editable -%}
        <dt>{{ 'field.expires_at'|trans({}, 'EkynaUi') }}</dt>
        <dd>{{ sale.expiresAt|format_datetime('short', 'none') }}</dd>
        {%- endif %}

        {% if sale.voucherNumber is not empty -%}
        <dt>{{ 'sale.field.voucher_number'|trans({}, 'EkynaCommerce') }}</dt>
        <dd>{{ sale.voucherNumber }}</dd>
        {%- endif %}

        {% if sale.paymentTerm -%}
        <dt>{{ 'payment_term.label.singular'|trans({}, 'EkynaCommerce') }}</dt>
        <dd>{{ sale.paymentTerm.title }}</dd>
        {%- endif %}

        {% if sale.currency.code != commerce_default_currency -%}
            <dt>{{ 'field.exchange_rate'|trans({}, 'EkynaCommerce') }}</dt>
            <dd>{{ sale|currency_rate }}</dd>.
        {%- endif %}

        <dt>{{ 'customer.label.singular'|trans({}, 'EkynaCommerce') }}:
        <dd>{% if sale.customer %}{{ sale.customer|identity }}{% else %}{{ sale|identity }}{% endif %}</dd>

        {% if sale is sale_order and sale.originCustomer -%}
        <dt>{{ 'sale.field.origin_customer'|trans({}, 'EkynaCommerce') }}</dt>
        <dd>{{ sale.originCustomer|identity }}</dd>
        {%- endif %}
    </dl>

{%- endmacro sale_header -%}

{%- macro sale_delivery_address(sale) -%}
    {%- if sale.relayPoint is not null -%}
        <em>({{ 'relay_point.label.singular'|trans({}, 'EkynaCommerce') }})</em><br>
        {{- sale.relayPoint|address -}}
    {%- elseif sale.sameAddress -%}
        <em>{{ 'sale.field.same_address'|trans({}, 'EkynaCommerce') }}</em>
    {%- else -%}
        {{- sale.deliveryAddress|address -}}
    {%- endif -%}
{%- endmacro sale_delivery_address -%}
