{% apply spaceless %}
    <div class="table-responsive">
        <table class="{{ classes }}">
            <thead>
            <tr>
                <th>
                    {{- 'stock_subject.field.mode'|trans({}, 'EkynaCommerce') -}}
                </th>
                <th>
                    {{- 'stock_subject.field.state'|trans({}, 'EkynaCommerce') -}}
                </th>
                <th>
                    {{- 'field.in_stock'|trans({}, 'EkynaCommerce') -}}
                </th>
                <th>
                    {{- 'field.available_stock'|trans({}, 'EkynaCommerce') -}}
                </th>
                <th>
                    {{- 'field.virtual_stock'|trans({}, 'EkynaCommerce') -}}
                </th>
                <th>
                    {{- 'field.replenishment_eda'|trans({}, 'EkynaCommerce') -}}
                </th>
            </tr>
            </thead>
            <tbody>
            {%- for subject in subjects -%}
                {%- set subjectId = prefix ~ '_' ~ loop.index0 -%}
                <tr>
                    <td id="{{ subjectId ~ '_mode' }}">
                        {{- subject|stock_subject_mode_badge -}}
                    </td>
                    <td id="{{ subjectId ~ '_state' }}">
                        {{- subject|stock_subject_state_badge -}}
                    </td>
                    <td id="{{ subjectId ~ '_inStock' }}" class="text-right">
                        {{- subject.inStock|format_number -}}
                    </td>
                    <td id="{{ subjectId ~ '_availableStock' }}" class="text-right">
                        {{- subject.availableStock|format_number -}}
                    </td>
                    <td id="{{ subjectId ~ '_virtualStock' }}" class="text-right">
                        {{- subject.virtualStock|format_number -}}
                    </td>
                    <td id="{{ subjectId ~ '_estimatedDateOfArrival' }}">
                        {%- if subject.estimatedDateOfArrival is not empty -%}
                            {{ subject.estimatedDateOfArrival|format_datetime('short', 'none') }}
                        {%- else -%}
                            <em>{{ 'value.unknown'|trans({}, 'EkynaUi') }}</em>
                        {%- endif -%}
                    </td>
                </tr>
            {%- else -%}
                <tr>
                    <td colspan="6" class="text-center">
                        <em>{{ 'stock_unit.alert.empty_list'|trans({}, 'EkynaCommerce') }}</em>
                    </td>
                </tr>
            {%- endfor -%}
            </tbody>
        </table>
    </div>
{% endapply %}
