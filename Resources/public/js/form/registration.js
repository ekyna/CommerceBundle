define(["jquery","validator"],function(a,b){"use strict";function c(b,c){b.prop("required",c);var d=a('label[for="'+b.attr("id")+'"]');1===d.size()&&(c?d.addClass("required"):d.removeClass("required"))}return a.fn.registrationWidget=function(){var d={password_min_length:6,email_first:"#registration_customer_email_first",email_second:"#registration_customer_email_second",password_first:"#registration_customer_plainPassword_first",password_second:"#registration_customer_plainPassword_second",company:"#registration_customer_company",vat_number:"#registration_customer_vatNumber",apply_group:"#registration_applyGroup > input",business:"#registration_business",regular:"#registration_regular"};return this.each(function(){function e(){j.removeClass("has-success has-error"),l.removeClass("has-success has-error");var a=i.val();return 6<a.length&&b.isEmail(a)?(j.addClass("has-success"),void(a===k.val()?l.addClass("has-success"):l.addClass("has-error"))):void j.addClass("has-error")}function f(){n.removeClass("has-success has-error"),p.removeClass("has-success has-error");var a=m.val();return 6<=a.length?(n.addClass("has-success"),void(a===o.val()?p.addClass("has-success"):p.addClass("has-error"))):void n.addClass("has-error")}function g(){console.log(r.val());var b=r.filter(":checked");return 1===b.size()&&1===parseInt(b.data("business"))?(c(q,!0),s.slideUp(function(){s.find("select,input").each(function(){a(this).val(null)})}),void t.slideDown()):(s.slideDown(),t.slideUp(function(){t.find("select,input").each(function(){a(this).val(null)})}),void c(q,!1))}var h=a(this),i=h.find(d.email_first),j=i.closest(".form-group"),k=h.find(d.email_second),l=k.closest(".form-group"),m=h.find(d.password_first),n=m.closest(".form-group"),o=h.find(d.password_second),p=o.closest(".form-group"),q=h.find(d.company),r=(h.find(d.vat_number),h.find(d.apply_group)),s=h.find(d.regular),t=h.find(d.business);1===i.size()&&h.on("change keyup",d.email_first+", "+d.email_second,e),1===m.size()&&h.on("change keyup",d.password_first+", "+d.password_second,f),h.on("change",d.apply_group,g),g()}),this},{init:function(a){a.registrationWidget()}}});