define(["jquery","routing"],function(r,i){"use strict";return r.fn.customerSearchWidget=function(n){return n=r.extend({limit:8},n),this.each(function(){var e=r(this),t=i.generate(e.data("search")),a=(i.generate(e.data("find")),1==e.data("clear"));e.select2({placeholder:"Rechercher ...",allowClear:a,minimumInputLength:3,selectOnClose:!0,ajax:{delay:300,url:t,dataType:"json",data:function(e){return{search:e.term,page:e.page,limit:n.limit}},processResults:function(e,t){return t.page=t.page||1,{results:e.items,pagination:{more:t.page*n.limit<e.total_count}}},escapeMarkup:function(e){return e}}})}),this},{init:function(e){e.customerSearchWidget()}}});