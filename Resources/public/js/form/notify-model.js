define(["jquery","routing","tinymce"],function(a,b){"use strict";if("undefined"==typeof tinymce)throw"Tinymce is not available.";return a.fn.notifyModelChoiceWidget=function(){this.each(function(){var c,d=a(this),e=d.closest("form"),f=d.find(".model-choice"),g=d.find(".locale-choice"),h=e.find(".notify-subject"),i=e.find(".notify-message"),j=d.data("sale-type"),k=i.attr("id");return d.on("change","select",function(){var e=f.val();if(!e)return void f.parent().addClass("has-warning");f.parent().removeClass("has-warning");var l={id:e,_locale:g.val()};l[j+"Id"]=d.data("sale-id"),a.getJSON(b.generate("admin_ekyna_commerce_"+j+"_notify_model",l),function(a){a.hasOwnProperty("subject")&&h.val(a.subject),a.hasOwnProperty("message")&&(c=tinymce.get(k),c?c.setContent(a.message):i.val(a.message))})}),this})},{init:function(a){a.notifyModelChoiceWidget()}}});