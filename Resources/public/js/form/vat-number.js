define(["jquery","bootstrap"],function(i){"use strict";return i.fn.vatNumberWidget=function(){return this.each(function(){var t,n,e,a,s,l,d,o=i(this),c=o.find('button[type="button"]');function u(t){d=t,1===a.length&&a.prop("checked",t.valid),c.removeClass("btn-default"),t.valid?c.addClass("btn-success").popover({container:"body",content:t.content,html:!0,placement:"top",sanitize:!1}):c.addClass("btn-danger")}1===c.length&&(t=o.data("config"),n=c.find(".fa"),e=o.find('input[type="text"]'),a=i(t.checkbox),s=null,l=t.lastNumber,(d=t.lastResult)&&u(d),e.on("keyup",function(){d&&e.val()===l?d.valid?c.removeClass("btn-default btn-danger").addClass("btn-success"):c.removeClass(" btn-default btn-success").addClass("btn-danger"):c.removeClass("btn-success btn-danger").addClass("btn-default")}),c.on("click",function(){if(s&&s.abort(),e.val()!==l&&(l=e.val(),d=null,0!==l.length)){try{c.popover("destroy")}catch(t){}n.removeClass("fa-check").addClass("fa-spinner fa-pulse"),(s=i.ajax({url:t.path,data:{number:l},method:"GET",dataType:"json"})).done(function(t){u(t)}),s.always(function(){n.removeClass("fa-spinner fa-pulse").addClass("fa-check")})}}))}),this},{init:function(t){t.vatNumberWidget()}}});