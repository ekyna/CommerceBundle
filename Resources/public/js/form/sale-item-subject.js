define(["jquery","routing","ekyna-spinner"],function(r,a){"use strict";return r.fn.saleItemSubjectWidget=function(){return this.each(function(){var t,e=r(this),i=e.find(".commerce-subject-choice select.provider"),c=e.find(".commerce-subject-choice select.subject"),o=e.find(".sale-item-subject-stock");function n(){t&&t.abort(),o.empty();var e=String(i.val()),n=parseInt(c.val());0<e.length&&0<n&&(o.loadingSpinner("on"),(t=r.ajax({url:a.generate("admin_ekyna_commerce_inventory_subject_stock",{provider:e,identifier:n}),method:"GET",dataType:"html"})).done(function(e){0<e.length&&o.html(e)}),t.always(function(){o.loadingSpinner("off")}))}i.on("change",n),c.on("change",n),n()}),this},{init:function(e){e.saleItemSubjectWidget()}}});