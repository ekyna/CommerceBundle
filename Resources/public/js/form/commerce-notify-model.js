define(["jquery","routing","tinymce"],function(a,b){"use strict";if("undefined"==typeof tinymce)throw"Tinymce is not available.";return a.fn.notifyModelChoiceWidget=function(){this.each(function(){var c,d=a(this),e=d.closest("form"),f=d.find(".model-choice"),g=d.find(".locale-choice"),h=e.find(".notify-subject"),i=e.find(".notify-message"),j=d.data("sale-type"),k=i.attr("id");return d.on("change","select",function(){var e={id:f.val(),_locale:g.val()};e[j+"Id"]=d.data("sale-id"),a.getJSON(b.generate("ekyna_commerce_"+j+"_admin_notify_model",e),function(a){a.hasOwnProperty("subject")&&h.val(a.subject),a.hasOwnProperty("message")&&(c=tinymce.get(k),c?c.setContent(a.message):i.val(a.message))})}),this})},{init:function(a){a.notifyModelChoiceWidget()}}});