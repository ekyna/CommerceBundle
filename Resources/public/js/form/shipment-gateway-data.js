define(["jquery","routing","ekyna-form","ekyna-spinner"],function(i,d,o){"use strict";return i.fn.gatewayDataWidget=function(){return this.each(function(){var t=i(this),a=t.closest("form").find(t.data("method")),r=null;1===a.length&&a.on("change",function(){r&&(r.abort(),r=null);var n,e=parseInt(a.val())||0;e<=0?t.empty():(t.loadingSpinner(),n=t.data("shipment"),e={orderId:t.data("order"),shipmentMethodId:e,return:t.data("return")},n&&(e.shipmentId=n),(r=i.ajax({url:d.generate("admin_ekyna_commerce_order_shipment_gateway_form",e),dataType:"xml"})).done(function(n){t.loadingSpinner("off"),t.empty();n=i(n).find("form");1===n.length&&(t.append(i(n.text()).children()),o.create(t).init())}))})}),this},{init:function(n){n.gatewayDataWidget()}}});