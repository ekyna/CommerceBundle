define(["jquery","ekyna-dispatcher","ekyna-modal","ekyna-commerce/templates","ekyna-spinner"],function(i,o,s,n){function e(e){this.$element=i("#"+e),this.prefix=this.$element.data("prefix"),this.$table=this.$element.find("> table");var a=this;this.$element.on("click","[data-stock-unit-modal]",function(e){e.preventDefault(),e.stopPropagation();var t=new s,n=i(e.currentTarget),r=a.$element.find("tr#"+n.data("rel"));return t.load({url:i(e.currentTarget).attr("href"),method:"GET"}),i(t).on("ekyna.modal.response",function(e){"json"===e.contentType&&(e.preventDefault(),a.render(r,e.content),e.modal.close(),o.trigger("ekyna_commerce.stock_units.change"))}),!1})}return e.prototype.render=function(e,t){e=e.attr("id"),t=n["@EkynaCommerce/Js/stock_unit_rows.html.twig"].render({prefix:this.prefix,stock_units:t.stock_units});this.$table.find("> tbody").remove(),this.$table.append(i(t)),this.$table.find("tbody#"+e+"_adjustments").show()},e});