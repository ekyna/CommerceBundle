define(["jquery","ekyna-dispatcher","ekyna-modal","ekyna-commerce/templates","ekyna-spinner"],function(a,b,c,d){var e=function(d){this.$element=a("#"+d),this.prefix=this.$element.data("prefix"),this.$table=this.$element.find("> table");var e=this;this.$element.on("click","[data-stock-unit-modal]",function(d){d.preventDefault(),d.stopPropagation();var f=new c,g=a(d.currentTarget),h=e.$element.find("tr#"+g.data("rel"));return f.load({url:a(d.currentTarget).attr("href"),method:"GET"}),a(f).on("ekyna.modal.response",function(a){"json"===a.contentType&&(a.preventDefault(),e.render(h,a.content),a.modal.close(),b.trigger("ekyna_commerce.stock_units.change"))}),!1})};return e.prototype.render=function(b,c){var e=b.attr("id"),f=d["@EkynaCommerce/Js/stock_unit_rows.html.twig"].render({prefix:this.prefix,stock_units:c.stock_units});this.$table.find("> tbody").remove(),this.$table.append(a(f)),this.$table.find("tbody#"+e+"_adjustments").show()},e});