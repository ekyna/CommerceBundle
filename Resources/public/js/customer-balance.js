define(["jquery","ekyna-commerce/templates","ekyna-modal","ekyna-ui"],function(a,b,c){function d(b){this.$element=b,this.$element.data("customerBalance",this),this.$form=this.$element.find("form"),this.$submit=this.$form.find('button[name="balance[submit]"]'),this.$submit.on("click",a.proxy(this.onSubmit,this))}return d.prototype.onSubmit=function(a){a.preventDefault(),a.stopPropagation();var c=this.$element;return this.$element.loadingSpinner(),this.$form.ajaxSubmit({dataType:"json",success:function(a){var d=b["@EkynaCommerce/Js/customer_balance_rows.html.twig"].render({balance:a});c.find("table > tbody").html(d)},complete:function(){c.loadingSpinner("off")}}),!1},a.fn.customerBalance=function(){return this.each(function(){void 0===a(this).data("customerBalance")&&new d(a(this))})},a(".customer-balance").customerBalance(),d});