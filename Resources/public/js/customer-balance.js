define(["jquery","ekyna-commerce/templates","ekyna-modal","ekyna-spinner"],function(e,n,t){function i(t){this.$element=t,this.$element.data("customerBalance",this),this.$form=this.$element.find("form"),this.$submit=this.$form.find('button[name="balance[submit]"]'),this.$submit.on("click",e.proxy(this.onSubmit,this))}return i.prototype.onSubmit=function(t){t.preventDefault(),t.stopPropagation();var e=this.$element;return this.$element.loadingSpinner(),this.$form.ajaxSubmit({dataType:"json",success:function(t){t=n["@EkynaCommerce/Js/customer_balance_rows.html.twig"].render({balance:t});e.find("table > tbody").html(t)},complete:function(){e.loadingSpinner("off")}}),!1},e.fn.customerBalance=function(){return this.each(function(){void 0===e(this).data("customerBalance")&&new i(e(this))})},e(".customer-balance").customerBalance(),i});