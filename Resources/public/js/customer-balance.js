define(["jquery","ekyna-modal","ekyna-commerce/templates","ekyna-ui"],function(a,b,c){function d(a){this.$element=a,this.$element.data("customerBalance",this),this.$form=this.$element.find("form"),this.$submit=this.$form.find('button[name="balance[submit]"]'),this.init()}return d.prototype.init=function(){this.bindEvents()},d.prototype.bindEvents=function(){this.$submit.on("click",this.update.bind(this))},d.prototype.update=function(b){b.preventDefault(),b.stopPropagation();var d=this.$element;return this.$element.loadingSpinner(),this.$form.ajaxSubmit({dataType:"json",success:function(b){var e=c["@EkynaCommerce/Js/customer_balance_rows.html.twig"].render({balance:b});d.find("tbody").replaceWith(a(e))},complete:function(){d.loadingSpinner("off")}}),!1},a.fn.customerBalance=function(){return this.each(function(){void 0===a(this).data("customerBalance")&&new d(a(this))})},a(".customer-balance").customerBalance(),d});